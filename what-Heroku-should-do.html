<!DOCTYPE html>
<html> <head lang=en><meta charset=UTF-8><title>What Heroku Should Do | EF</title><link href=//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css rel=stylesheet><link href=http://fonts.googleapis.com/css?family=Inconsolata rel=stylesheet type=text/css><link rel=stylesheet href=http://nafiulis.me/theme/css/main.css><link rel=stylesheet href=http://nafiulis.me/theme/css/pygment.css><script src=http://nafiulis.me/theme/js/jquery.min.js></script><script src=http://nafiulis.me/theme/js/main.js></script></head> <body> <!--Heading at the top saying "Engineering Fantasy"--> <div id=header_top> <div class=title> <a href=http://nafiulis.me><span id=engineering>Engineering</span><span id=fantasy>Fantasy</span></a> </div> </div> <button type=button class="js-menu-trigger sliding-menu-button button-nav"> <img src=https://raw.githubusercontent.com/thoughtbot/refills/master/source/images/menu-white.png alt="Menu Icon"> </button> <!--Navigation Bar--> <nav class="js-menu sliding-menu-content"> <span class=section-header>Pages</span> <ul> <li><a href=http://nafiulis.me>Home</a></li> <li><a href=http://nafiulis.me/tags.html>Tags</a></li> <li><a href=http://nafiulis.me/pages/about-me.html>About Me</a></li> </ul> <span class=section-header>Categories</span> <ul> <li><a href=http://nafiulis.me/category/anime.html>Anime</a></li> <li><a href=http://nafiulis.me/category/education.html>Education</a></li> <li><a href=http://nafiulis.me/category/productivity.html>Productivity</a></li> <li><a href=http://nafiulis.me/category/programming.html>programming</a></li> <li><a href=http://nafiulis.me/category/rants.html>rants</a></li> </ul> </nav> <div class="js-menu-screen menu-screen"></div> <!--Main Container--> <div class=container> <!--Top most menu--> <div id=menu> <div class=left> <a href=http://nafiulis.me/feeds/all.atom.xml><i class="fa fa-rss
                        icon"></i></a> <a href=https://twitter.com/gamesbrainiac><i class="fa fa-twitter icon"></i></a> </div> <div class=center> <h1 class=message>Nafiul Islam on casting spells with code</h1> </div> <div class=right> <a href=https://github.com/gamesbrainiac><i class="fa fa-github icon"></i></a> <a href=http://stackoverflow.com/users/1624921/games-brainiac><i class="fa fa-stack-overflow icon" style="padding-right: 30px"></i></a> </div> </div> <!--Main blog list container--> <div id=blogroll> <div class=article-container> <h1>What Heroku Should Do</h1> <p class=time>Saturday, 03 February 2018</p> <div class=article-content> <p><em>DISCLAIMER: THESE OPINIONS ARE MY OWN AND DO NOT REFLECT THE OPINIONS OF MY FORMER OR PRESENT EMPLOYERS</em></p> <div class="contents topic" id=table-of-contents> <p class="topic-title first">Table of Contents</p> <ul class=simple> <li><a class="reference internal" href=#heroku-connect id=id1>Heroku Connect</a><ul> <li><a class="reference internal" href=#heterogeneous-syncing-types id=id2>Heterogeneous Syncing Types</a></li> <li><a class="reference internal" href=#pay-per-row id=id3>Pay per Row</a></li> </ul> </li> <li><a class="reference internal" href=#underpowered-dynos id=id4>Underpowered Dynos</a></li> <li><a class="reference internal" href=#deploy-anywhere-but id=id5>Deploy Anywhere (but...)</a></li> <li><a class="reference internal" href=#heroku-is-an-ecosystem id=id6>Heroku is an Ecosystem</a></li> <li><a class="reference internal" href=#what-heroku-is-doing-right id=id7>What Heroku is Doing Right</a></li> </ul> </div> <p>I've been using Heroku for a while not at my workplace and so have many of our developers. Heroku is actually a really good idea, and thats why services like convox.io and platform.sh keep popping up. The notion, that you can have your servers managed by people, and not need a full time devops team is a total godsend. Iterations are faster and easier, and it allows our teams to focus on application logic. It is not without its set of caveats though. The market place also makes for quick integrations with other service providers, which makes adding things like cache and search very easy.</p> <p>I myself was pretty skeptical at the beginning because although for my personal projects, my perception of Heroku was that it was pretty expensive, and not something that you'd want to use at a <em>real</em> company. By the time I joined, Heroku was already being used for several applications. I mean, at the time, I just thought it was a nice skin on top of AWS (which is an accurate description even to present day).</p> <p>However, the real reason that the company was using Heroku was because of a product called <em>Heroku Connect</em> (HC).</p> <div class=section id=heroku-connect> <h2><a class=toc-backref href=#id1>Heroku Connect</a></h2> <p>Heroku Connect is basically a syncing tool. It basically syncs data from SalesForce (SF) to a Heroku operated Postgresql database. The data in SalesForce (SF) was coming from the company's own servers. In other words, we were paying Heroku to gain access to out own data. This initially perplexed me, but I soon found out is that the old platform had issues scaling data access out, so we decided to use HC and Postgresql as a temporary solution to create a couple of applications that we could use to test new products and new markets. SF does have an API, but that has API limits for reads and writes, and is generally used for bulk updates and reads. Furthermore, it gets quite slow if you're building an API on top of it. However, we soon ran into a couple of issues very quickly. HC in conjunction with Postgresql was seen as a really good alternative, because it allowed you to bypass data access limit by essentially creating a copy of your business data in Postgresql.</p> <p>However, we soon ran into a couple of issues really quickly.</p> <div class=section id=heterogeneous-syncing-types> <h3><a class=toc-backref href=#id2>Heterogeneous Syncing Types</a></h3> <p>In SF, data is stored within things called SalesForce Objects (SO). These SOs are basically tables, and through HC are mapped to Postgresql tables. There are two ways in which syncs occur. One is that there is a set interval after which the data from SF is synced to Postgresql and the changes with Postgresql are synced to SalesForce. The other way is that data is synced in real time. What is perplexing is that you never know which SOs are eligible for real time updates and which ones will only be updated at intervals. You can always see which objects are being updated at intervals, and which ones are being updated in real time, but you never know <em>why</em> a particular SO gets real time updates while another SO gets updates at intervals. Sometimes, SOs that had real time updates will start getting interval updates instead. This is because you might hit what is called the &quot;Streaming API limit&quot;. What this limit is, and how it is reached remains a mystery to me as well as our SF developers.</p> <p>If you're building a service that gives you quick and unlimited access to SF, then you better deliver on that promise otherwise, people will become disillusioned by your service as a whole and so despite have some awesome product, your reputation is going to suffer as a natural consequence.</p> </div> <div class=section id=pay-per-row> <h3><a class=toc-backref href=#id3>Pay per Row</a></h3> <p>If you want to use HC, you have to pay an amount for a particular number of rows. So basically, you are paying for the data in SF, you are paying for the data in Postgresql, and on top of that you have to pay per row to use HC. This is maddening because it makes so little sense. If you're building a syncing service, you should be charging for throughput, and not for the amount of data. This also makes sense because the higher the throughput, the higher the costs for Heroku as a business, so it'd make sense for both Heroku and the companies buying the HC service.</p> <p>But the real consequence of this pricing scheme is that if you want to launch a geo-distributed application built on top of HC, you need to pay for rows in <em>each</em> region because Heroku's postgres does not have multi-master replication, only master-slave replication. So, if you had to pay for regions in the US, EU and China, then you'd need to pay for the same number of rows <em>three</em> times.</p> </div> </div> <div class=section id=underpowered-dynos> <h2><a class=toc-backref href=#id4>Underpowered Dynos</a></h2> <p>Dynos are basic units of computation for Heroku. In a generic sense, they are a virtual machine.</p> <p>The lowest tier dyno is really quite pathetic. Its just 512 MBs of RAM and 1 GHz, and for the equivalent price, you could get a <em>few</em> t2.mirco instances from AWS and I'm pretty sure that you could get the same from Azure and Google Cloud Platform. Although you get auto-scaling as well as maintenance on those VMs, the price seems quite steep for the kind of product that they're offering.</p> </div> <div class=section id=deploy-anywhere-but> <h2><a class=toc-backref href=#id5>Deploy Anywhere (but...)</a></h2> <p>You can <em>theoretically</em> deploy on pretty much any continent using Heroku. However, there are two Herokus. There is the public cloud, and then there is the private cloud. If this is news to you, then what you've been using all this time is Heroku's public cloud. The public cloud only has a few regions, whereas the private cloud has many regions from Virginia to Tokyo.</p> <p>However, the two clouds have a completely different payment scheme. To just be able to <em>use</em> the private cloud you need to pay a certain amount every month, just for the privilege of being able to use it. You're not getting any dynos or anything. Just to be able to use the private cloud, you need to pay an amount upfront, and its not cheap either. Furthermore, the dynos in the private cloud are more expensive (yes, they have a little more compute power), which makes geo-distribution of your applications quite expensive.</p> </div> <div class=section id=heroku-is-an-ecosystem> <h2><a class=toc-backref href=#id6>Heroku is an Ecosystem</a></h2> <p>In Heroku the <em>app</em> is the center of the universe. You <em>attach</em> add-ons like redis or Postgresql to your application. You can indeed <em>share</em> add-ons between applications, but later on, it becomes difficult to monitor what add-on is owned by what app. It is far better if you have an interface, where you have the add-ons separate to the applications, so that you can share resources between applications more easily.</p> </div> <div class=section id=what-heroku-is-doing-right> <h2><a class=toc-backref href=#id7>What Heroku is Doing Right</a></h2> <p>Heroku has probably the best service you can get. If something breaks or something goes wrong with your application, their support mechanism is truly exceptional, because they will ping up an on-call engineer to fix your production problems. Usually, these issues are resolved very quickly.</p> <p>Secondly, even if you consider that Heroku is expensive, having your own devops team is even more expensive, and further still if you need them to be on-call. This is difficult for small companies.</p> <p>Furthermore, Heroku also has some of the best account executives you can get. They are really quite helpful, and truly fight for you with upper management to give you the best deals possible if you buy bulk plans. I've only worked with two so far, but they really are fighting for you in the company, and what to see you succeed.</p> </div> </div> </div> <div class=post-meta><span class=meta-type>Category: </span> <span><a href=http://nafiulis.me/category/programming.html>Programming</a></span> <span class=meta-type> Tags: </span> <span> <a href=http://nafiulis.me/tag/heroku.html>Heroku</a>, <a href=http://nafiulis.me/tag/web.html>web</a>, <a href=http://nafiulis.me/tag/saas.html>saas</a> </span> </div> <div id=disqus_thread style="margin-top: 10px; margin-left: 20px; margin-right: 20px;"></div> <script type=text/javascript>
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'nafiulisme'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script> <noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript> </div> <!--Footer--> <div id=footer> <footer> Code examples licenced under MIT License <br> Copyright <i class="fa fa-copyright"></i> 2018 Quazi Nafiul Islam </footer> </div> </div> <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-55554110-1', 'auto');
          ga('send', 'pageview');
        </script> </body> </html>