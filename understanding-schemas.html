<!DOCTYPE html>
<html> <head lang=en><meta charset=UTF-8><title>Understanding Schemas | EF</title><link href=//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css rel=stylesheet><link href=http://fonts.googleapis.com/css?family=Inconsolata rel=stylesheet type=text/css><link rel=stylesheet href=http://nafiulis.me/theme/css/main.css><link rel=stylesheet href=http://nafiulis.me/theme/css/pygment.css><script src=http://nafiulis.me/theme/js/jquery.min.js></script><script src=http://nafiulis.me/theme/js/main.js></script></head> <body> <!--Heading at the top saying "Engineering Fantasy"--> <div id=header_top> <div class=title> <a href=http://nafiulis.me><span id=engineering>Engineering</span><span id=fantasy>Fantasy</span></a> </div> </div> <button type=button class="js-menu-trigger sliding-menu-button button-nav"> <img src=https://raw.githubusercontent.com/thoughtbot/refills/master/source/images/menu-white.png alt="Menu Icon"> </button> <!--Navigation Bar--> <nav class="js-menu sliding-menu-content"> <span class=section-header>Pages</span> <ul> <li><a href=http://nafiulis.me>Home</a></li> <li><a href=http://nafiulis.me/tags.html>Tags</a></li> <li><a href=http://nafiulis.me/pages/about-me.html>About Me</a></li> </ul> <span class=section-header>Categories</span> <ul> <li><a href=http://nafiulis.me/category/anime.html>Anime</a></li> <li><a href=http://nafiulis.me/category/education.html>Education</a></li> <li><a href=http://nafiulis.me/category/productivity.html>Productivity</a></li> <li><a href=http://nafiulis.me/category/programming.html>programming</a></li> <li><a href=http://nafiulis.me/category/rants.html>rants</a></li> </ul> </nav> <div class="js-menu-screen menu-screen"></div> <!--Main Container--> <div class=container> <!--Top most menu--> <div id=menu> <div class=left> <a href=http://nafiulis.me/feeds/all.atom.xml><i class="fa fa-rss
                        icon"></i></a> <a href=https://twitter.com/gamesbrainiac><i class="fa fa-twitter icon"></i></a> </div> <div class=center> <h1 class=message>Nafiul Islam on casting spells with code</h1> </div> <div class=right> <a href=https://github.com/gamesbrainiac><i class="fa fa-github icon"></i></a> <a href=http://stackoverflow.com/users/1624921/games-brainiac><i class="fa fa-stack-overflow icon" style="padding-right: 30px"></i></a> </div> </div> <!--Main blog list container--> <div id=blogroll> <div class=article-container> <h1>Understanding Schemas</h1> <p class=time>Wednesday, 08 October 2014</p> <div class=article-content> <div class="contents topic" id=table-of-contents> <p class="topic-title first">Table of Contents</p> <ul class=simple> <li><a class="reference internal" href=#schemas-are-namespaces id=id1>Schemas are namespaces</a></li> <li><a class="reference internal" href=#inside-a-schema id=id2>Inside a Schema</a></li> <li><a class="reference internal" href=#creating-schemas id=id3>Creating Schemas</a></li> <li><a class="reference internal" href=#references id=id4>References</a></li> </ul> </div> <p>I've been brushing up on my SQL lately, and one key concept that I forgot about where schemas. I rarely used them since I created most of my tables in the public schema (shame on me), but it was interesting to read up the documentation on them again.</p> <div class=section id=schemas-are-namespaces> <h2><a class=toc-backref href=#id1>Schemas are namespaces</a></h2> <p>In short, schemas are namespaces that house your functions, tables triggers etc. What's a namespace? Its like a container of addresses. The reason why we use them is to prevent cluttering of the main/public namespace.</p> <p>In fact, every table that you've ever created inside postgres lives inside a schema. For example, in <code>psql</code> you can use <code>\d</code> and then hitting <kbd class=light>tab</kbd> to show you what schemas are available:</p> <img alt="The dots indicate schemas or namespaces" class=align-center src=images/schema_01.png> <p>The dots indicate that those options are schemas. There is always a schema involved when you create a table or a function. Generally, all your functions are put into the <code>public</code> schema. So, in the above example, we can see <code>messages</code> as a table, and it looks as though its not in a schema, but it is. One can also refer to it as <code>public.messages</code>:</p> <div class=highlight><pre><span></span><span class=n>test</span><span class=o>=#</span> <span class=err>\</span><span class=n>d</span> <span class=k>public</span><span class=p>.</span><span class=n>messages</span>
   <span class=k>Table</span> <span class=ss>&quot;public.messages&quot;</span>
 <span class=k>Column</span> <span class=o>|</span>  <span class=k>Type</span>   <span class=o>|</span> <span class=n>Modifiers</span>
<span class=c1>--------+---------+-----------</span>
 <span class=n>id</span>     <span class=o>|</span> <span class=nb>integer</span> <span class=o>|</span> <span class=k>not</span> <span class=k>null</span>
 <span class=k>data</span>   <span class=o>|</span> <span class=nb>text</span>    <span class=o>|</span>
 <span class=nb>date</span>   <span class=o>|</span> <span class=nb>date</span>    <span class=o>|</span>
<span class=n>Indexes</span><span class=p>:</span>
    <span class=ss>&quot;messages_pkey&quot;</span> <span class=k>PRIMARY</span> <span class=k>KEY</span><span class=p>,</span> <span class=n>btree</span> <span class=p>(</span><span class=n>id</span><span class=p>)</span>

<span class=n>test</span><span class=o>=#</span> <span class=err>\</span><span class=n>d</span> <span class=n>messages</span>
   <span class=k>Table</span> <span class=ss>&quot;public.messages&quot;</span>
 <span class=k>Column</span> <span class=o>|</span>  <span class=k>Type</span>   <span class=o>|</span> <span class=n>Modifiers</span>
<span class=c1>--------+---------+-----------</span>
 <span class=n>id</span>     <span class=o>|</span> <span class=nb>integer</span> <span class=o>|</span> <span class=k>not</span> <span class=k>null</span>
 <span class=k>data</span>   <span class=o>|</span> <span class=nb>text</span>    <span class=o>|</span>
 <span class=nb>date</span>   <span class=o>|</span> <span class=nb>date</span>    <span class=o>|</span>
<span class=n>Indexes</span><span class=p>:</span>
    <span class=ss>&quot;messages_pkey&quot;</span> <span class=k>PRIMARY</span> <span class=k>KEY</span><span class=p>,</span> <span class=n>btree</span> <span class=p>(</span><span class=n>id</span><span class=p>)</span>
</pre></div> </div> <div class=section id=inside-a-schema> <h2><a class=toc-backref href=#id2>Inside a Schema</a></h2> <p>To see what tables are inside of a schema, you can keep on using tab completion, use a wildcard or use a query. Tab completion is pretty self-explanatory. If you want to use a wildcard then use it like so:</p> <div class=highlight><pre><span></span><span class=n>exercises</span><span class=o>=#</span> <span class=err>\</span><span class=n>dt</span> <span class=n>cd</span><span class=p>.</span><span class=o>*</span>
               <span class=n>List</span> <span class=k>of</span> <span class=n>relations</span>
 <span class=k>Schema</span> <span class=o>|</span>    <span class=n>Name</span>    <span class=o>|</span> <span class=k>Type</span>  <span class=o>|</span>      <span class=k>Owner</span>
<span class=c1>--------+------------+-------+------------------</span>
 <span class=n>cd</span>     <span class=o>|</span> <span class=n>bookings</span>   <span class=o>|</span> <span class=k>table</span> <span class=o>|</span> <span class=n>quazinafiulislam</span>
 <span class=n>cd</span>     <span class=o>|</span> <span class=n>facilities</span> <span class=o>|</span> <span class=k>table</span> <span class=o>|</span> <span class=n>quazinafiulislam</span>
 <span class=n>cd</span>     <span class=o>|</span> <span class=n>members</span>    <span class=o>|</span> <span class=k>table</span> <span class=o>|</span> <span class=n>quazinafiulislam</span>
<span class=p>(</span><span class=mi>3</span> <span class=k>rows</span><span class=p>)</span>
</pre></div> <p>We use the extra <code>t</code> in <code>\dt</code> to give us table information only. If you use used <code>\d cd.*</code>, then you'd get a lot more information regarding each table. You can try it out for yourself.</p> <p>Another way to get the same information is use to use a query:</p> <div class=highlight><pre><span></span><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>information_schema</span><span class=p>.</span><span class=n>tables</span> <span class=k>WHERE</span> <span class=n>table_schema</span> <span class=o>=</span> <span class=s1>&#39;cd&#39;</span>
</pre></div> <p>Note that this is also a schema, and this schema also exists under the <code>public</code> schema. What do I mean by that, well take a look at this:</p> <div class=highlight><pre><span></span><span class=n>exercises</span><span class=o>=#</span> <span class=err>\</span><span class=n>d</span> <span class=k>public</span><span class=p>.</span><span class=n>information_schema</span><span class=p>.</span><span class=n>tables</span>
                       <span class=k>View</span> <span class=ss>&quot;information_schema.tables&quot;</span>
            <span class=k>Column</span>            <span class=o>|</span>               <span class=k>Type</span>                <span class=o>|</span> <span class=n>Modifiers</span>
<span class=c1>------------------------------+-----------------------------------+-----------</span>
 <span class=n>table_catalog</span>                <span class=o>|</span> <span class=n>information_schema</span><span class=p>.</span><span class=n>sql_identifier</span> <span class=o>|</span>
 <span class=n>table_schema</span>                 <span class=o>|</span> <span class=n>information_schema</span><span class=p>.</span><span class=n>sql_identifier</span> <span class=o>|</span>
 <span class=k>table_name</span>                   <span class=o>|</span> <span class=n>information_schema</span><span class=p>.</span><span class=n>sql_identifier</span> <span class=o>|</span>
 <span class=n>table_type</span>                   <span class=o>|</span> <span class=n>information_schema</span><span class=p>.</span><span class=n>character_data</span> <span class=o>|</span>
 <span class=n>self_referencing_column_name</span> <span class=o>|</span> <span class=n>information_schema</span><span class=p>.</span><span class=n>sql_identifier</span> <span class=o>|</span>
 <span class=n>reference_generation</span>         <span class=o>|</span> <span class=n>information_schema</span><span class=p>.</span><span class=n>character_data</span> <span class=o>|</span>
 <span class=k>user_defined_type_catalog</span>    <span class=o>|</span> <span class=n>information_schema</span><span class=p>.</span><span class=n>sql_identifier</span> <span class=o>|</span>
 <span class=k>user_defined_type_schema</span>     <span class=o>|</span> <span class=n>information_schema</span><span class=p>.</span><span class=n>sql_identifier</span> <span class=o>|</span>
 <span class=k>user_defined_type_name</span>       <span class=o>|</span> <span class=n>information_schema</span><span class=p>.</span><span class=n>sql_identifier</span> <span class=o>|</span>
 <span class=n>is_insertable_into</span>           <span class=o>|</span> <span class=n>information_schema</span><span class=p>.</span><span class=n>yes_or_no</span>      <span class=o>|</span>
 <span class=n>is_typed</span>                     <span class=o>|</span> <span class=n>information_schema</span><span class=p>.</span><span class=n>yes_or_no</span>      <span class=o>|</span>
 <span class=n>commit_action</span>                <span class=o>|</span> <span class=n>information_schema</span><span class=p>.</span><span class=n>character_data</span> <span class=o>|</span>
</pre></div> <p>In essence, everything lives under the <code>public</code> schema.</p> </div> <div class=section id=creating-schemas> <h2><a class=toc-backref href=#id3>Creating Schemas</a></h2> <p>Creating schemas are as simple as creating tables. Here's an example:</p> <div class=highlight><pre><span></span><span class=n>test</span><span class=o>=#</span> <span class=k>CREATE</span> <span class=k>SCHEMA</span> <span class=n>happy_schema</span><span class=p>;</span>
<span class=k>CREATE</span> <span class=k>SCHEMA</span>
</pre></div> <p>When you create a schema, you can also create tables and functions under it in one command:</p> <div class=highlight><pre><span></span><span class=n>test</span><span class=o>=#</span> <span class=k>CREATE</span> <span class=k>SCHEMA</span> <span class=n>ShoppingCenters</span>
<span class=n>test</span><span class=o>-#</span>     <span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>Malls</span> <span class=p>(</span><span class=n>id</span> <span class=nb>integer</span> <span class=k>PRIMARY</span> <span class=k>KEY</span><span class=p>,</span> <span class=n>name</span> <span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>100</span><span class=p>))</span>
<span class=n>test</span><span class=o>-#</span>     <span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>SuperMarkets</span> <span class=p>(</span><span class=n>id</span> <span class=nb>integer</span> <span class=k>PRIMARY</span> <span class=k>KEY</span><span class=p>,</span> <span class=n>name</span> <span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>100</span><span class=p>),</span> <span class=n>capacity</span> <span class=nb>integer</span><span class=p>);</span>
<span class=k>CREATE</span> <span class=k>SCHEMA</span>
<span class=n>test</span><span class=o>=#</span> <span class=err>\</span><span class=n>dt</span> <span class=n>shoppingcenters</span><span class=p>.</span><span class=o>*</span>
                     <span class=n>List</span> <span class=k>of</span> <span class=n>relations</span>
     <span class=k>Schema</span>      <span class=o>|</span>     <span class=n>Name</span>     <span class=o>|</span> <span class=k>Type</span>  <span class=o>|</span>      <span class=k>Owner</span>
<span class=c1>-----------------+--------------+-------+------------------</span>
 <span class=n>shoppingcenters</span> <span class=o>|</span> <span class=n>malls</span>        <span class=o>|</span> <span class=k>table</span> <span class=o>|</span> <span class=n>quazinafiulislam</span>
 <span class=n>shoppingcenters</span> <span class=o>|</span> <span class=n>supermarkets</span> <span class=o>|</span> <span class=k>table</span> <span class=o>|</span> <span class=n>quazinafiulislam</span>
<span class=p>(</span><span class=mi>2</span> <span class=k>rows</span><span class=p>)</span>
</pre></div> <p>This feels a lot like using python's <code>with</code> statement.</p> </div> <div class=section id=references> <h2><a class=toc-backref href=#id4>References</a></h2> <ul class=simple> <li><a class="reference external" href=http://stackoverflow.com/questions/15644152/list-tables-in-a-postgresql-schema>List tables in a Postgresql Schema</a></li> <li><a class="reference external" href=http://www.postgresql.org/docs/9.1/static/ddl-schemas.html>Postgresql Schema</a></li> </ul> </div> </div> </div> <div class=post-meta><span class=meta-type>Category: </span> <span><a href=http://nafiulis.me/category/programming.html>Programming</a></span> <span class=meta-type> Tags: </span> <span> <a href=http://nafiulis.me/tag/sql.html>sql</a>, <a href=http://nafiulis.me/tag/postgresql.html>postgresql</a> </span> </div> <div id=disqus_thread style="margin-top: 10px; margin-left: 20px; margin-right: 20px;"></div> <script type=text/javascript>
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'nafiulisme'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script> <noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript> </div> <!--Footer--> <div id=footer> <footer> Code examples licenced under MIT License <br> Copyright <i class="fa fa-copyright"></i> 2017 Quazi Nafiul Islam </footer> </div> </div> <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-55554110-1', 'auto');
          ga('send', 'pageview');
        </script> </body> </html>